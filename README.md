#### `http://geoworks.pro:3000/<function>?[<param>=<value>&]`

Каждый успешный ответ содержит JSON объект или файл. В JSON объекте всегда присутствует поле `ok` (true/false). Если false - в ответе будет код ошибки и текстовое описание.


## Functions
##### `state`
Возвращает массив объектов, содержащих информацию о всех устройствах и их состоянии (ошибка, работа/сон, заряд, метонахождение, id)

##### `<dev>/wakeup`
Устанавливает флаг на пробуждение для девайса с `id`=`<dev>`. Устройство будет готово к работе через 90 сек.

Пример запроса: `http://geoworks.org:3000/infDev1/wakeup`
Проверить флаг: `http://geoworks.pro:1234/watch?action=get&iddev=infDev1`

##### `<dev>/photo`
Снимает фото. После успешного выполнения возвращется файл .jpg. Если возникла ошибка, возвращается JSON объект с описанием ошибки.

Пример ответа с ошибкой: `{"ok":false,"error":{"code":503,"text":"cam is busy"}}`

##### `<dev>/video`
Параметры:
+ duration (integer, required) - Длительность видео в секундах. Должно быть > 0
Снимает видео длительностью *duration* секунд и отдаёт файл (h264) в ответ. При неудаче JSON с описанием ошибки.

Пример: `http://geoworks.org:3000/infDev1/video?duration=30`

##### `<dev>/stream/start`
Запускает видео трансляцию. Возвращает JSON объект (успех/неудача).

Доступ по адресу: страница `http://geoworks.pro:800<NPdev>/stream`, элемент для встраивания `http://geoworks.pro:800<dev>/stream/video.mjpeg`

##### `<dev>/stream/stop`
Останавливает видео трансляцию. Возвращает JSON объект (успех/неудача).

##### `<dev>/sensors`
Считывает значения датчиков отдаёт JSON объект, содержащий значения или ошибку.

##### `<dev>/diag`
Возвращает диагностическую информацию об устройстве:
+ id (string)
+ время устройства (string)
+ геопозиция (string)
+ уровень заряда (float(2) 0-1)
+ аптайм в секундах (int)
+ количество ошибок (int)
+ текущее действие (enum string). Возможные значения:
	+ `wait`
	+ `shooting Photo`
	+ `shooting Video`
	+ `streaming Video`
	+ ... будет дополнено

## ...